function addScript(e,t){var n=document.createElement("script");n.setAttribute("type","text/javascript"),n.src=e,n.setAttribute("dd-name",t),document.body.appendChild(n)}function createShopList(){shopList=document.createElement("div"),shopList.className="cnt_right_1",shop_list.insertBefore(shopList,shop_list_btn)}function createData(e){for(var t=e.shop_data,n=0;n<t.length;n++)totalData.push(t[n]);console.log(totalData),index=parseInt(t.length/5),createShopList_item(),createBtn(index),addEvent(index),goUpPage(index),goDownPage(index),init(),Totalposition=[]}function createBtn(e){for(var t=document.getElementsByClassName("btn1")[1],n=0;e>n;n++){var a=document.createElement("a");a.className="btn",a.id="",a.innerHTML=n+1,a.setAttribute("href","###"),shop_list_btn.insertBefore(a,t)}var a=document.getElementsByClassName("btn")[0];a.id="currentBtn"}function goUpPage(e){btn1[1].addEventListener("click",function(){console.log("1");for(var t=0;e>t;t++)if("currentBtn"==btn[t].id)if(0!=t){shop_list.removeChild(shopList);for(var n=0;n<btn.length;n++)btn[t].id="";start=5*(t-1),btn[t-1].id="currentBtn",end=5*t,createShopList(),createShopList_item()}else{shop_list.removeChild(shopList);for(var t=0;t<btn.length;t++)btn[t].id="";start=25,end=30,btn[5].id="currentBtn",createShopList(),createShopList_item()}})}function goDownPage(e){btn1[0].addEventListener("click",function(){console.log("1");for(var t=e-1;t>=0;t--)if("currentBtn"==btn[t].id){if(5==t){shop_list.removeChild(shopList);for(var n=0;6>n;n++)btn[n].id="";btn[0].id="currentBtn",console.log(btn[0]),start=0,end=5,createShopList(),createShopList_item();break}shop_list.removeChild(shopList);for(var a=0;6>a;a++)btn[a].id="";btn[t+1].id="currentBtn",start=5*(t+1),end=5*(t+2),createShopList(),createShopList_item()}})}function addEvent(e){for(var t=document.getElementsByClassName("btn"),n=0;e>n;n++)!function(e){t[e].addEventListener("click",function(){shop_list.removeChild(shopList);for(var n=0;n<t.length;n++)t[n].id="";this.id="currentBtn",start=5*e,end=5*(e+1),createShopList(),createShopList_item()})}(n)}function createShopList_item(){for(var e=document.getElementsByClassName("cnt_right_1")[0],t=start;end>t;t++){var n=[];shopDesc.push(totalData[t].shop_desc),shopAddr.push(totalData[t].addr),n.push(parseFloat(totalData[t].map_longitude)),n.push(parseFloat(totalData[t].map_latitude)),Totalposition.push(n);var a=document.createElement("div");a.className="list_item",e.appendChild(a);var o=document.createElement("div");o.className="pic",a.appendChild(o);var s=document.createElement("a");o.appendChild(s);var l=document.createElement("img");l.src=totalData[t].shop_ico,s.appendChild(l);var i=document.createElement("div");i.className="cont",a.appendChild(i);var r=document.createElement("h3");i.appendChild(r);var d=document.createElement("a");d.innerHTML=totalData[t].shop_name,r.appendChild(d);var c=document.createElement("div");c.className="shop_grade",r.appendChild(c);var p=document.createElement("span");p.innerHTML="店铺等级:",c.appendChild(p);var m=document.createElement("a");c.appendChild(m);for(var u=0;u<parseInt(totalData[t].sorce);u++){var h=document.createElement("span");h.className="icon",m.appendChild(h)}var v=document.createElement("div");v.className="desc",v.innerHTML="主营:"+totalData[t].shop_desc,i.appendChild(v);var g=document.createElement("div");g.className="addr",g.innerHTML="地址:"+totalData[t].addr,i.appendChild(g);var f=document.createElement("div");f.className="shop_score",i.appendChild(f);var y=document.createElement("div");y.className="shop_pf",y.innerHTML="先行赔付",f.appendChild(y);var _=document.createElement("span");_.className="pf",y.appendChild(_);var b=document.createElement("div");b.className="shop_rz",b.innerHTML="同城帮认证",f.appendChild(b);var E=document.createElement("span");E.className="rz",b.appendChild(E);var C=document.createElement("div");C.className="shop_rq",f.appendChild(C);var L=document.createElement("span");L.innerHTML="人气:",C.appendChild(L);var k=document.createElement("span");k.innerHTML=totalData[t].shop_visit+"次浏览",L.appendChild(k);var N=document.createElement("a");N.className="enter",N.innerHTML="进入店铺",i.appendChild(N)}}function init(){for(var e=new AMap.Map("bd_top",{resizeEnable:!0,zoom:11,center:[116.397428,39.90923]}),t=0;5>t;t++)!function(t){var n=new AMap.Marker({icon:"image/map.jpg",position:Totalposition[t]});n.setMap(e);var a=new AMap.InfoWindow({content:"<h3>深圳联想笔记售后</h3><div>主营："+shopDesc[t]+"</div><div>地址："+shopAddr[t]+"</div><a>进入店铺<<</a>",position:Totalposition[t],offset:new AMap.Pixel(10,-30),size:new AMap.Size(0,100)});AMap.event.addListener(n,"click",function(){a.open(e,this.getPosition()),console.log(this.getPosition())})}(t)}function suggestHandle(){for(var e="search",t=document.getElementsByTagName("body")[0],n=document.getElementsByTagName("script"),a=0;a<n.length;a++)console.log(n[a].getAttribute("dd-name")),"search"==n[a].getAttribute("dd-name")&&t.removeChild(n[a]);var o=addr_ipt.value,s="http://suggest.bang.360.cn/suggest?word=",l="&category=7&encodein=utf-8&encodeout=utf-8&format=json&callback=window.suggest&t=0.3514809920297852?callback=handleData",i=s+o+l;addScript(i,e),window.suggest=function(e){search_notic.style.display="block",e.result.forEach(function(e){var t=document.getElementById("search_notic"),n=document.createElement("div");n.className="myp",n.color="#185",t.appendChild(n),n.innerHTML=e.word,n.addEventListener("click",function(e){var e=e.target||e.srcElement;addr_ipt.value=e.innerHTML})})}}for(var slide_list=document.getElementById("slide_list"),ctrl=document.getElementsByClassName("ctrl"),shop_list_btn=document.getElementsByClassName("shop_list_btn")[0],cate_li=document.getElementsByClassName("cate_li"),hide_menu_inner=document.getElementsByClassName("hide_menu_inner")[0],hide=document.getElementsByClassName("hide"),arow_left=document.getElementsByClassName("arow_left"),flag=!1,i=0;i<cate_li.length;i++)!function(e){cate_li[e].addEventListener("mouseover",function(t){for(var n=0;n<hide.length;n++)hide[n].style.display="none",arow_left[n].style.display="none";t.preventDefault(),hide[e].style.display="block",arow_left[e].style.display="block"}),hide[e].addEventListener("mouseover",function(t){flag=!0,t.preventDefault(),hide[e].style.display="block",arow_left[e].style.display="block"}),cate_li[e].addEventListener("mouseout",function(t){t.preventDefault(),flag||(hide[e].style.display="none",arow_left[e].style.display="none")}),hide[e].addEventListener("mouseout",function(t){t.preventDefault(),hide[e].style.display="none",arow_left[e].style.display="none"})}(i);for(var i=0,timer=setInterval(function(){if(i-=1200,ctrl[0].style.background="black",i>-6e3){if(slide_list.style.left=i+"px",-1200==i){ctrl[1].style.background="black";for(var e=0;e<ctrl.length;e++)1!=e&&(ctrl[e].style.background="#eee")}else if(-2400==i){ctrl[2].style.background="black";for(var e=0;e<ctrl.length;e++)2!=e&&(ctrl[e].style.background="#eee")}else if(-3600==i){ctrl[3].style.background="black";for(var e=0;e<ctrl.length;e++)3!=e&&(ctrl[e].style.background="#eee")}else if(-4800==i){ctrl[4].style.background="black";for(var e=0;e<ctrl.length;e++)4!=e&&(ctrl[e].style.background="#eee")}}else{i=0,slide_list.style.left=i+"px",ctrl[0].style.background="black";for(var e=1;e<ctrl.length;e++)ctrl[e].style.background="#eee"}},3e3),j=-1200,i=0;i<ctrl.length;i++)ctrl[i].addEventListener("click",function(){slide_list.style.left=(e+1)*j;for(var e=0;e<ctrl.length;e++)ctrl[e].style.background="#eee";this.style.background="black"});var shop_list=document.getElementsByClassName("shop_list")[0],start,end,shopList,totalData=[];createShopList(),function(e,t){function n(){start=e,end=t,addScript("http://localhost:3000/data/pagecount/1?callback=createData")}n()}(0,5);var index=0,Totalposition=[],shopDesc=[],shopAddr=[],btn1=document.getElementsByClassName("btn1"),btn=document.getElementsByClassName("btn"),shop_list=document.getElementsByClassName("shop_list")[0],mapModer=document.getElementsByClassName("mapModer")[0],map=document.getElementsByClassName("map")[0],moder=document.getElementsByClassName("moder")[0];mapModer.addEventListener("click",function(){map.style.display="block",moder.style.display="block"});var close=document.getElementById("close");close.addEventListener("click",function(){map.style.display="none",moder.style.display="none"});var bd_top=document.getElementsByClassName("bd_top"),back_top_btn=document.getElementById("back_top_btn");window.onscroll=function(){back_top_btn.style.display=document.body.scrollTop>200?"block":"none"},back_top_btn.onclick=function(){var e=document.body.scrollTop,t=e/60,n=setInterval(function(){document.body.scrollTop<=0?(clearInterval(n),document.body.scrollTop=0):document.body.scrollTop=document.body.scrollTop-t},1)};var addr_ipt=document.getElementsByClassName("addr_ipt")[0];setInterval(function(){if(""==addr_ipt.value){for(var e=0;e<myp.length;e++)search_notic.removeChild(myp[e]);search_notic.style.display="none"}},300);var myp=document.getElementsByClassName("myp");addr_ipt.addEventListener("focusin",function(){suggestHandle()}),addr_ipt.addEventListener("keyup",function(){suggestHandle()});